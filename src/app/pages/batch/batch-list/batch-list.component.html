<div class="d-flex flex-column flex-lg-row h-lg-full bg-light">
  <div class="h-screen flex-grow-1">
    <!-- Header Section -->
    <header class="bg-white border-bottom pt-1 pb-3 shadow-sm">
      <div class="container-fluid">
        <div class="row align-items-center">
          <div class="col-sm-6 col-12 mb-3 mb-sm-0">
            <h2 class="mb-0">Batches</h2>
          </div>
          <div class="col-sm-6 col-12 text-sm-end">
            <div class="d-flex justify-content-sm-end">
              <input class="form-control w-50 me-2" type="search" placeholder="Search..." aria-label="Search"
                [(ngModel)]="searchQuery" />
              <!-- <button type="button" class="btn btn-primary" (click)="openModel()" >
                <i class="fa-solid fa-plus"></i> Add Batch
              </button> -->
              <button type="button" class="btn btn-primary" routerLink="/admin/enrollments/0">
                <i class="fa-solid fa-plus"></i> Add Batch
              </button>



            </div>
          </div>
        </div>
      </div>
    </header>
    <!-- Main Content -->
    <div class="main">
      <div class="card  border-0">
        <div class="card-body py-0">
          <div class="table-responsive">
            <ng-template #dataTable>
              <table class="table table-bordered table-hover align-middle">
                <thead class="table-success">
                  <tr>
                    <th scope="col">ID</th>
                    <th scope="col">Batch Name</th>
                    <th scope="col">Start Date</th>
                    <th scope="col">End Date</th>
                    <th scope="col">Teacher</th>
                    <th scope="col" class="text-center">Action</th>
                  </tr>
                </thead>
                <tbody>
                  @for(batch of totalBatches; track $index) {
                  <tr
                    *ngIf="batch.batchName.toLowerCase().includes(searchQuery.toLowerCase()) || batch.teacher.toLowerCase().includes(searchQuery.toLowerCase())">
                    <td class="fw-bold">{{ $index+1 }}</td>
                    <td>{{ batch.batchName }}</td>
                    <td>{{ batch.startDate | date : "MMM d, y, h:mm a" }}</td>
                    <td>{{ batch.endDate | date : "MMM d, y, h:mm a" }}</td>
                    <td>{{ batch.teacher }}</td>
                    <td class="text-center">
                      <button class="btn btn-primary  me-2" (click)="editBatch(batch.batchId)">
                        <i class="fa-solid fa-pen-to-square"></i>
                      </button>
                      <button class="btn btn-danger " (click)="deleteBatch(batch.batchId)">
                        <i class="fa-solid fa-trash"></i>
                      </button>
                    </td>
                  </tr>
                  }
                </tbody>
              </table>
            </ng-template>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- Loading data -->
<ng-container *ngIf="isLoadingData; else dataTable">
  <div class="d-flex flex-column justify-content-center align-items-center my-3">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
    <p class="mt-3" style="color: gray;">Loading batches, please wait...</p>
  </div>
</ng-container>